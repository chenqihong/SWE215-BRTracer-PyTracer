<project name="org.eclipse.jdt.ui" default="export" basedir="..">
<!-- build script to create a plugin from org.eclipse.jdt.ui -->

	<target name="init">
		<tstamp/>
		<property name="tempdir"	value="../../tmp" />
		<property name="destdir"	value="../../plugin-export" />
		<property name="plugin"		value="org.eclipse.jdt.ui" />
		<property name="version"	value="_3.1.0" />
		<property name="dest"		value="${destdir}/${plugin}${version}" />
		<property name="destjar"	value="${destdir}/${plugin}${version}.jar" />
	</target>

	<target name="build" depends="init">
    	<eclipse.incrementalBuild project="${plugin}" kind="incr"/>
	</target>

	<target name="export" depends="build">
		<delete dir="${tempdir}" />
		<mkdir dir="${tempdir}" />
		<mkdir dir="${destdir}" />
		<delete file="${destjar}" />
		<zip zipfile="${tempdir}/src.zip">
		    <fileset dir="core refactoring" />
		    <fileset dir="ui refactoring" />
		    <fileset dir="ui" />
		    <fileset dir="core extension" />
  		</zip>		
		<zip zipfile="${destjar}">
			<fileset dir=".">
			  <include name="plugin.xml" />
			  <include name="plugin.properties" />
			  <include name="serialsupport.jar" />
			  <include name="JavadocViewStyleSheet.css" />
			  <include name="JavadocHoverStyleSheet.css" />
			  <include name="icons/**"/>
			  <include name="templates/**" />
			  <include name="META-INF/**" />
			</fileset>
			<fileset dir="bin" />
			<fileset file="${tempdir}/src.zip" />
		</zip>
		<delete file="${tempdir}/src.zip" />
	</target>
</project>
