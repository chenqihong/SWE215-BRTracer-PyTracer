<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><HTML>
<HEAD>

<meta name="copyright" content="Copyright (c) IBM Corporation and others 2000, 2005. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page." >

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="../book.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE>Contexts</TITLE>

<link rel="stylesheet" type="text/css" HREF="../book.css">
</HEAD>
<BODY BGCOLOR="#ffffff">

<h3>
Contexts</h3>
<P >
A <b>context</b> can be used to influence what commands are available to the user at any given moment.
Contexts are much more dynamic than activities.  While an activity represents a broad set of function that
is available to the user most of the time, contexts describe a focus of the user at a specific point
in time.  For example, the commands available to a user while editing text might be different than those
available to a user while editing Java text or browsing packages in the package explorer.
</P>
<h4>Defining a context</h4>
<p>
Contexts are declared in the
<b><a href="../reference/extension-points/org_eclipse_ui_contexts.html">org.eclipse.ui.contexts</a></b>
extension point. Consider the following context which is defined for editing text:
</p>
<pre>&lt;extension
	point="org.eclipse.ui.contexts"&gt;
	&lt;context
		name="%context.editingText.name"
		description="%context.editingText.description"
		id="org.eclipse.ui.textEditorScope"
		parentId="org.eclipse.ui.contexts.window"&gt;
	&lt;/context&gt;
</pre>
Contexts are assigned a name and description that are used when showing information about the context to the user.
The id of the context is used when binding UI contributions such as commands to a particular context.
<h4>Context hierarchies</h4>
<p>
Contexts are hierarchical in nature.  When a context is active, the commands available in the context and in its parent contexts
are also available.  This is useful for defining levels of contexts that move from very general situations down to more
specific contexts.  In the context definition above, note that there is an id of a parent assigned to the context:
</p>
<pre>	&lt;context
		name="%context.editingText.name"
		description="%context.editingText.description"
		id="org.eclipse.ui.textEditorScope"
		<b>parentId="org.eclipse.ui.contexts.window"</b>&gt;
	&lt;/context&gt;
</pre>
The parent context defines the more general context of working within a window.  Its parent defines an even
more general context of working within a window or a dialog.
<pre>
&lt;context
	name="%context.window.name"
	description="%context.window.description"
	id="org.eclipse.ui.contexts.window"
	<b>parentId="org.eclipse.ui.contexts.dialogAndWindow"</b>&gt;
&lt;/context&gt;
&lt;context
	name="%context.dialogAndWindow.name"
	description="%context.dialogAndWindow.description"
	id="org.eclipse.ui.contexts.dialogAndWindow"&gt;
&lt;/context&gt;
</pre>
<h4>Associating a contribution with a context</h4>
<p>
So far, all we've done is define a hierarchy of contexts.  The context becomes useful when it is referenced in the
description of another UI contribution.  The most common use of contexts is in key bindings.  When a context is
associated with a key binding, the key binding will only be active when the user is in that context.  For example,
the following markup specifies the root dialog and window context as the context for a key binding:
</p>
<pre>&lt;keyBinding
	commandId="org.eclipse.ui.edit.cut"
	<b>contextId="org.eclipse.ui.contexts.dialogAndWindow"</b>
	keySequence="M1+X"
	keyConfigurationId="org.eclipse.ui.defaultAcceleratorConfiguration"&gt;
&lt;/keyBinding&gt;
</pre>
<h4>
Using Context API</h4>
<p>
The workbench context support includes an API for working with the defined contexts and defining
criteria under which a particular context should become enabled.  Most plug-ins need not be 
concerned with this API, but it is useful when defining specialized views or editors that define
new contexts.  
</p>
<p>
The starting point for working with contexts in the workbench is <a href="../reference/api/org/eclipse/ui/contexts/IWorkbenchContextSupport.html"><b>IWorkbenchContextSupport</b></a>.
Plug-ins can obtain the context support instance from the workbench.  
</p>
<pre>IWorkbenchContextSupport workbenchContextSupport = PlatformUI.getWorkbench().getContextSupport();
</pre>
The workbench context support API can be used to add or remove an 
<a href="../reference/api/org/eclipse/ui/contexts/EnabledSubmission.html"><b>EnabledSubmission</b></a>,
which describes criteria that should cause a particular context to become enabled.  Criteria include
information such as the active part or active shell.  The workbench support also provides access to an
<a href="../reference/api/org/eclipse/ui/contexts/IContextManager.html"><b>IContextManager</b></a>.
<pre>
IContextManager contextManager = workbenchContextSupport.getContextManager();
</pre>
<p>
<a href="../reference/api/org/eclipse/ui/contexts/IContextManager.html"><b>IContextManager</b></a> defines
protocol for getting all defined or enabled context ids, and for getting the associated 
<a href="../reference/api/org/eclipse/ui/contexts/IContext.html"><b>IContext</b></a> for a particular id.
These objects can be used to traverse the definition for a context in API, such as getting the
id, name, or id of the parent context.  Listeners can be registered on the context manager or on the contexts 
themselves to detect changes in the definition of a particular context or in the context manager
itself.  See the package <b><a href="../reference/api/org/eclipse/ui/contexts/package-summary.html">org.eclipse.ui.contexts</a></b>
for more information.
</p>



</BODY>
</HTML>
