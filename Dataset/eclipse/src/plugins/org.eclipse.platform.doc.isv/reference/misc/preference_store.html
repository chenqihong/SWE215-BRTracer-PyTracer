<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><HTML>
<head>

<meta name="copyright" content="Copyright (c) IBM Corporation and others 2000, 2005. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page." >

<meta http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<link REL="STYLESHEET" HREF="../../book.css" CHARSET="ISO-8859-1" TYPE="text/css">
<title>JFace preference stores</title>
</head>
<BODY BGCOLOR="#ffffff">
<h1>JFace Preference Stores</h1>
<p>As of release 3.1 the <a href="../api/org/eclipse/jface/preference/IPreferenceStore.html"><strong>org.eclipse.jface.preference.IPreferenceStore</strong></a> 
  that is returned from AbstractUIPlugin#getPreferenceStore will be an instance 
  of <strong><a href="../api/org/eclipse/ui/preferences/ScopedPreferenceStore.html">org.eclipse.ui.preferences.ScopedPreferenceStore</a></strong>. 
  The ScopedPreferenceStore uses the new core runtime API to manage preferences. 
  In 3.0 it used the compatibility layer to interface with an instance of <strong><a href="../api/org/eclipse/core/runtime/Preferences.html">org.eclipse.core.runtime.Preferences</a></strong>.</p>
<p>In 3.1 we have disambiguated IPreferenceStore to be more specific about the 
  types of the values sent in preference changed events. The IPreferenceStore 
  from AbstractUIPlugin#getPreferenceStore has the same behavior as before - all 
  that has changed is that it has been specified more clearly.</p>
<p><strong>Typing:</strong> <strong><a href="../api/org/eclipse/jface/util/IPreferenceChangeListener.html">org.eclipse.jface.util.IPreferenceChangeListeners</a></strong> 
  added to an IPreferenceStore can potentially get two types of old and new values 
  - typed or String representations. Any event generated by a call to a typed 
  IPreferenceStore API (such as <code>setValue(String key, boolean value)</code> 
  will generate a typed event. However it is also possible that events will be 
  propagated from the core runtime preferences which generate an un typed event 
  (for instance on a preference import). Preference listeners need to be prepared 
  for both. Note also that typed events will not be propagating primitive types 
  so a call to <code>setValue(String key, boolean value)</code> will result in 
  an event where the oldValue and newValue are Booleans.</p>
<p><strong>putValue</strong>: IPreferenceStore.putValue(String key, String value) 
  will not generate a change event. This API is meant to be used for private preferences 
  that no listener would want to react to.</p>
<p><strong>initializeDefaultPreferences</strong>. This API was deprecated in Eclipse 
  3.0 as it is only fired if the compatibility layer is used. As most plug-ins 
  rely on AbstractUIPlugin#getPreferenceStore to get their preference store this 
  was being fired on plug-in start-up previously. If your plug-in does not access 
  the compatibility layer itself then this method may not be fired. It is recommended 
  that you create a <a href="../api/org/eclipse/core.runtime/preferences/AbstractPreferenceInitializer.html"><strong>org.eclipse.core.runtime.preferences.AbstractPreferenceInitializer</strong></a> 
  to handle your preference initialization.</p>

</BODY></HTML>