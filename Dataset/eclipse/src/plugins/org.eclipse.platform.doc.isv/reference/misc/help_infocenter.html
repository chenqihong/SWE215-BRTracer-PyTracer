<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
   <head>

<meta name="copyright" content="Copyright (c) IBM Corporation and others 2000, 2005. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page." >

      <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
      <meta name="Author" content="eclipse.org">
      <title>
         Infocenter
      </title>
  <link REL="STYLESHEET" HREF="../../book.css" CHARSET="ISO-8859-1" TYPE="text/css">
   </head>
<body>

<h1>Installing the help system as an infocenter</h1>

<p>You can allow your users to access the help system over the Internet or an 
intranet, by installing the infocenter and the documentation 
plug-ins on   a server. Clients view help by navigating 
to a URL, and the help system is shown in their web browser. The infocenter help 
system can be used both for client applications and for web applications, either 
of which can have their help accessed remotely. All features of help system except infopops and 
active help are supported. </p>
<P>The infocenter help system allows passing number of options that can
be used to customize various aspects of the infocenter. The following
options are supported:</P>
<UL>
	<LI><B>-eclipsehome</B> <I>eclipseInstallPath</I> - specifies Eclipse
	installation directory. This directory is a parent to "plugins" directory
	and eclipse executable.  The option must be provided, when current directory
	from which infocenter is launched, is
	not the same as Eclipse installation directory.</LI>

	<LI><B>-data</B> <I>instanceArea</I> - specifies a path that Eclipse
	can use to write instance data.  The value can be an absolute path of
	a directory, or a path relative to Eclipse installation directory.
	The option must be provided when Eclipse is installed in the read only
	location, or has been customized to override osgi.instance.area or
	osgi.instance.area.default properties. </LI>

	<LI><B>-host</B> <I>helpServerHost</I> - specifies host name of the
	interface that help server will use. It overrides host name specified in
	the application server plugin preferences.</LI>

	<LI><B>-port</B> <I>helpServerPort</I> - specifies port number that
	help server will use. It overrides port number specified in the
	application server plugin preferences.</LI>

  <li><b>-locales</b> <I>localeList</I> - specifies a list of locales that infocenter
   will recognize and provide a customized content for.
   If the option is not specified, infocenter will build navigation, and index documents
   for each preferred locale of the browsers accessing the infocenter.
   When the option is present, locales from browser requests will be matched with locales in the list.
   If browser preferred locale does not exist in the list, but its language part does, it will be used.
   Subsequently, additional browser locales in decreased order of preference will be matched against
   the list.  If none of the browser locales (or its language part) matches any locale on the list,
   the client will be served content in the default locale - server locale or locale passed with -nl option.
   For example using options <pre>-nl en -locales de en es fr it ja ko pt_BR zh_CN zh_TW</pre>
   will cause infocenter operating in 10 locales.  All other locales will receive content for en locale.</li>

	<LI><B>-dir ltr</B> or <B>-dir rtl</B> - forces left-to-right or right-to-left
	  rendering direction of help UI in the browser for all languages. By default
	  direction is determined based on the browser locale.</LI>

	<LI><B>-noexec</B> - indicates that Eclipse executable
	should not be used.  You may need to use this option when running
	on a platform for which Eclipse executable is not available.</LI>

	<LI>Additionally, most <A
		href="../../../org.eclipse.platform.doc.user/tasks/running_eclipse.htm">options
	accepted by Eclipse executable</A> can be passed. They are especially
	useful during debugging and for applying customization to Eclipse.
	For example, passing options
	<PRE><EM><SPAN style="font-style: normal">-vmargs -Xmx256M</SPAN></EM> </PRE>
	increases memory available to the infocenter and will allow serving a larger book collection.</LI>
</UL>
<H2><B>Installation/packaging</B></H2>
<P>These steps are for the help system integrator and are not meant to
address all the possible scenarios. It is assumed that all your
documentation is delivered as Eclipse plug-ins and, in general, you are
familiar with the eclipse help system.</P>
<OL>
	<LI>Download the Eclipse Platform Runtime Binary
	driver from <A target="_blank" href="http://www.eclipse.org/downloads/">www.eclipse.org</A>.</LI>
	<LI>Install (unzip) the driver in a directory, <VAR>d:\myApp</VAR>. This will create an eclipse sub-directory,
	d:\myApp\eclipse that contains the code required for the Eclipse
	platform (which includes the help system).</LI>
</OL>
<H2><B>How to start or stop infocenter from command line</B></H2>
<P>The org.eclipse.help.standalone.Infocenter class has a main method that you
can use to launch infocenter from a command line. The command line
arguments syntax is:</P>
<PRE><EM><SPAN style="font-style: normal">-command start | shutdown | [-eclipsehome eclipseInstallPath] [-data instanceArea] [-host helpServerHost] [-locales localeList] [-port helpServerPort] [-dir rtl] [-noexec] [platform options] [-vmargs JavaVMarguments]</SPAN></EM></PRE>
<P>To start an infocenter on port 8081 issue a start command by running</P>
<PRE>java -classpath d:\myApp\eclipse\plugins\org.eclipse.help.base_3.1.0.jar org.eclipse.help.standalone.Infocenter -command start -eclipsehome d:\myApp\eclipse -port 8081</PRE>
<P>To shut the infocenter down issue a shutdown command by running</P>

<PRE>java -classpath d:\myApp\eclipse\plugins\org.eclipse.help.base_3.1.0.jar org.eclipse.help.standalone.Infocenter -command shutdown -eclipsehome d:\myApp\eclipse</PRE>
<h2>Using the infocenter</h2>
<p>Start the web server. Point a web browser to the path &quot;help&quot; web 
application running on a port specified when starting the infocenter.&nbsp; On the machine the infocenter is installed, this would be 
http://localhost:8081/help/. </p>
<H2><B>How to start or stop infocenter from Java</B></H2>
<P>When including infocenter as part of another application, it may be more convenient to start it and stop using Java APIs instead of using system commands. Follow the steps if it is the case:</P>
<OL>
	<LI>Make sure <EM><SPAN style="font-style: normal">d:\myApp\eclipse\plugins\org.eclipse.help.base_3.1.0.jar</SPAN></EM>
	is on your app classpath. The class you use to start, and shut
	down the infocenter isorg.eclipse.help.standalone.Infocenter.</LI>
	<LI>Create an array of String containing options that you want to pass
	to the infocenter. Typically, the eclipsehome and port options are needed. <PRE><EM><SPAN
		style="font-style: normal">String[] options = new String[] { &quot;-eclipsehome&quot;, &quot;d:\\myApp\\eclipse&quot; , &quot;-port&quot;, &quot;8081&quot; };</SPAN></EM> </PRE></LI>
	<LI>In your application, create an instance of the Help class by
	passing the options.<PRE><EM><SPAN style="font-style: normal">Infocenter infocenter = new Help(options);</SPAN></EM> </PRE>
	</LI>
	<LI>To start the help system: <PRE><EM><SPAN style="font-style: normal">helpSystem.start();</SPAN></EM></PRE>
	</LI>
	<LI>
	<P>To shut the infocenter down:</P>
	<PRE><EM><SPAN style="font-style: normal">helpSystem.shutdown();</SPAN></EM> </PRE></LI>
</OL>
<H2>Making infocenter available on the web</H2>
<p>Eclipse contains a complete infocenter and does not require other server software to run.
However, in unsecure environment like Internet, it is recommended infocenter is not
accessed directly by clients, but is made available through an HTTP server or an application
server. Most servers come with modules or servlets for delegating certain request to other
web resources. For example, one may configure a proxy module of Apache HTTP Server
to redirect requests made to <I>http://mycompany.com/myproduct/infocenter</I> to
<I>http://internalserver:8081/help</I> that runs an infocenter. Adding the  lines
</p>
<pre>LoadModule proxy_module modules/ApacheModuleProxy.dll
ProxyPass /myproduct/infocenter http://internalserver:8081/help
ProxyPassReverse /myproduct/infocenter http://internalserver:8081/help
</pre>
<p>to conf/httpd.conf file of Apache server running mycompany web site accomplishes this.
</p>
<p>Some versions of Apache HTTP server, may contain AddDefaultCharset directive enabled in configuration file.
Remove the directive or replace with</p>
<pre>AddDefaultCharset Off</pre>
<p>to have browsers display documents using correct character set.
</p>

<H2>Running multiple instance of infocenter</H2>
<P>Multiple instances of infocenter can be run on a machine from one installation.
Each started instance must use its own port and be provided with a workspace,
hence <code>-port</code> and <code>-data</code> options must be specified.
The instances can serve documentation from different set of plug-ins, by providing
a valid platform configuration with <code>-configuration</code> option.
</P>
<P>If <code>-configuration</code> is not used and configuration directory is shared
among multiple infocenter instances, with overlapping set of locales, it must be ensured
that all search indexes are created by one infocenter instance before another instance is started.
Indexes are saved in the configuration directory, and write access is not synchronized
across infocenter processes.
</P>

<H2>[Optional] Installing a minimal set of plug-ins</H2>
 <p>The infocenter does not require the entire &nbsp;Eclipse Platform package.
It is possible to run the infocenter with the following plug-ins (located
in the&nbsp; eclipse\plugins directory):<br>
</p>
<p><code>
org.apache.lucene<br>
org.eclipse.core.runtime<br>
org.eclipse.help<br>
org.eclipse.help.appserver<br>
org.eclipse.help.base<br>
org.eclipse.help.webapp<br>
org.eclipse.osgi<br>
org.eclipse.tomcat<br>
org.eclipse.update.configurator<br>
</code>
</p>
<p>
Some documentation plug-ins may have dependencies on other plug-ins,
usually by specifying required plug-ins in their plugin.xml.
The dependent plug-ins need to be installed on the infocenter as well.
Additionally, plug-ins that were designed for earlier than 3.0 version of Eclipse
implicitly require an <code>org.eclipse.core.runtime.compatibility</code>
being present plug-in to work.
</p>
<p>
Infocenter plug-ins can be updated without restarting the infocenter, using
commands explained in <a href="help_infocenter_update.html">
Updating a running infocenter from command line</a> topic.  To use this
functionality, the minimal set of plug-ins must include
 <code>org.eclipse.update.core</code> plug-in.
</p>

<p>See <a href="help_preferences.html">Help System Preferences</a> for more
information on customizing help system.</p>


</body>
</html>

